function webEvents(e,n){n||(n=e,e=null);function t(e,n){var t,c=e.apply(i,n);"object"==typeof c&&(c instanceof Array?(t=c[0],n=c.slice(1),o.apply(i,[t].concat(n))):(t=c.type,delete(n=c).type,i.emit(t,n)))}function o(e){if(c.readyState!=WebSocket.CONNECTING){var n=Array.prototype.slice.call(arguments,1);c.send(JSON.stringify({type:e,args:n}))}else setTimeout(function(){o.apply(arguments)},4)}var c=null,i=function(){return o.apply(null,arguments),i};function a(){(c=new WebSocket(null==e?"ws://"+location.hostname:e)).onopen=function(){n.connection&&t(n.connection)},c.onmessage=function(e){var o;try{o=JSON.parse(e.data)}catch(e){return}"string"==typeof o.type&&n[o.type]&&t(n[o.type],o.args)},c.onclose=function(){n.close&&t(n.close)}}return i.emit=o,i.disconnect=function(){c.close()},i.reconnect=function(){c.readyState==WebSocket.OPEN&&c.close(),a()},i.version="2.2.1",a(),i}void 0===window.events&&(window.events=webEvents);