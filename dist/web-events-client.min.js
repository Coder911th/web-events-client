function webEvents(n,e){e||(e=n,n=null);function t(n,e){var t,c=n.apply(i,e);"object"==typeof c&&(c instanceof Array?(t=c[0],e=c.slice(1),o.apply(i,[t].concat(e))):(t=c.type,delete(e=c).type,i.emit(t,e)))}function o(n){var e=Array.prototype.slice.call(arguments,1);c.send(JSON.stringify({type:n,args:e}))}var c=null,i={emit:o,disconnect:function(){c.close()},reconnect:function(){WebSocket.OPEN&&c.close(),s()},version:"2.1.0"};function s(){(c=new WebSocket(null==n?"ws://"+location.hostname:n)).onopen=function(){e.connection&&t(e.connection)},c.onmessage=function(n){var o;try{o=JSON.parse(n.data)}catch(n){return}"string"==typeof o.type&&e[o.type]&&t(e[o.type],o.args)},c.onclose=function(){e.close&&t(e.close)}}return s(),i}void 0===window.events&&(window.events=webEvents);