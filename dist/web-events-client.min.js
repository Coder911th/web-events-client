function webEvents(evs){function returnEmit(func,args){var eventName,returnValue=func.apply(client,args);"object"==typeof returnValue&&(returnValue instanceof Array?(eventName=returnValue[0],args=returnValue.slice(1)):(eventName=returnValue.type,delete args.type),client.emit(eventName,args))}var socket=null,client={emit:function(eventName){var args=Array.prototype.slice.call(arguments,1);1==args.length&&"object"==typeof args[0]&&(args=args[0]),socket.send(JSON.stringify({type:eventName,args:args}))},disconnect:function(){socket.close()},reconnect:function(){WebSocket.OPEN&&socket.close(),connect()},version:"1.1.1"};function connect(){(socket=new WebSocket("ws://"+location.hostname)).onopen=function(){evs.connection&&returnEmit(evs.connection)},socket.onmessage=function(message){var data;try{data=JSON.parse(message.data)}catch(e){return}"string"==typeof data.type&&evs[data.type]&&returnEmit(evs[data.type],data.args)},socket.onclose=function(){evs.close&&returnEmit(evs.close)}}return connect(),client}void 0===window.events&&(window.events=webEvents);